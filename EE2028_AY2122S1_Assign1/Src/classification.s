/*
 * classification.s
 *
 *  Created on: 2021/8/26
 *      Author: Gu Jing
 */
   .syntax unified
  .cpu cortex-m4
  .fpu softvfp
  .thumb

    .global classification

@ Start of executable code
.section .text

@ EE2028 Assignment 1, Sem 1, AY 2021/22
@ (c) ECE NUS, 2021

@ Write Student 1’s Name here:
@ Write Student 2’s Name here:

@ You could create a look-up table of registers here:


@ write your program from here:


classification:
  PUSH {R0-R12,R14}
  LDR R5,[R3,#4]
  LDR R4,[R3]
  CMP R5,#2
  IT EQ
  BLEQ SUBROUTINE
  CMP R5,#3
  IT EQ
  BLEQ SUBROUTINE1
  CMP R5,#4
  IT EQ
  BLEQ SUBROUTINE2
  POP {R0-R12,R14}
  BX LR



SUBROUTINE:
  LDR R5,[R0],#4 @LOAD THE X-COORDINATE OF POINT TESTED
  LDR R7,[R1],#4 @LOAD THE X-COORDINATE OF CENTROID1
  SUBS R9,R5,R7 @DIFFERENCE IN X-COORDINATE
  LDR R6,[R0],#4 @LOAD THE Y-COORDINATE OF POINT TESTED
  LDR R8,[R1],#4 @LOAD THE Y-COORDINATE OF CENTROID1
  SUBS R10,R6,R8 @DIFFERENCE IN Y-COORDINATE
  LDR R7,[R1],#4 @LOAD THE X-COORDINATE OF CENTROID2
  LDR R8,[R1],#-12 @LOAD THE Y-COORDINATE OF CENTROID2
  SUBS R11,R5,R7 @DIFFERENCE IN X-COORDINATE
  SUBS R12,R5,R8 @DIFFERENCE IN Y-COORDINATE
  MUL R9,R9
  MLA R9,R10,R10,R9
  MUL R11,R11
  MLA R11,R12,R12,R11
  CMP R9,R11
  ITE GT
  MOVGT R9,#2
  MOVLE R9,#1
  STR R9,[R2],#4
  SUBS R4,#1
  CMP R4,#0
  BNE SUBROUTINE
  BX LR
SUBROUTINE1:
  LDR R5,[R0],#4  @LOAD THE X-COORDINATE OF POINT TESTED
  LDR R6,[R0],#4 @LOAD THE Y-COORDINATE OF POINT TESTED
  LDR R7,[R1],#4 @LOAD THE X-COORDINATE OF CENTROID1
  LDR R8,[R1],#4 @LOAD THE Y-COORDINATE OF CENTROID1
  LDR R9,[R1],#4 @LOAD THE X-COORDINATE OF CENTROID2
  LDR R10,[R1],#4 @LOAD THE Y-COORDINATE OF CENTROID2
  LDR R11,[R1],#4 @LOAD THE X-COORDINATE OF CENTROID3
  LDR R12,[R1],#-20 @LOAD THE Y-COORDINATE OF CENTROID3
  SUBS R7,R5,R7 @DIFFERENCE IN X-COORDINATE FROM CENTROID1
  SUBS R8,R6,R8 @DIFFERENCE IN Y-COORDINATE FROM CENTROID1
  SUBS R9,R5,R9 @DIFFERENCE IN X-COORDINATE FROM CENTROID2
  SUBS R10,R6,R10 @DIFFERENCE IN Y-COORDINATE FROM CENTROID2
  SUBS R11,R5,R11 @DIFFERENCE IN X-COORDINATE FROM CENTROID3
  SUBS R12,R6,R12 @DIFFERENCE IN Y-COORDINATE FROM CENTROID3
  MUL R7,R7
  MLA R7,R8,R8,R7
  MUL R9,R9
  MLA R9,R10,R10,R9
  MUL R11,R11
  MLA R11,R12,R12,R11
  MOV R5,R7
  CMP R5,R9
  IT GT
  MOVGT R5,R9
  CMP R5,R11
  IT GT
  MOVGT R5,R11
  CMP R5,R7
  IT EQ
  MOVEQ R8,#1
  CMP R5,R9
  IT EQ
  MOVEQ R8,#2
  CMP R5,R11
  IT EQ
  MOVEQ R8,#3
  STR R8,[R2],#4
  SUBS R4,#1
  CMP R4,#0
  BNE SUBROUTINE1
  BX LR
SUBROUTINE2:
  LDR R5,[R0],#4  @LOAD THE X-COORDINATE OF POINT TESTED
  LDR R6,[R0],#4 @LOAD THE Y-COORDINATE OF POINT TESTED
  LDR R7,[R1],#4 @LOAD THE X-COORDINATE OF CENTROID1
  LDR R8,[R1],#4 @LOAD THE Y-COORDINATE OF CENTROID1
  LDR R9,[R1],#4 @LOAD THE X-COORDINATE OF CENTROID2
  LDR R10,[R1],#4 @LOAD THE Y-COORDINATE OF CENTROID2
  LDR R11,[R1],#4 @LOAD THE X-COORDINATE OF CENTROID3
  LDR R12,[R1],#4 @LOAD THE Y-COORDINATE OF CENTROID3
  SUBS R7,R5,R7 @DIFFERENCE IN X-COORDINATE FROM CENTROID1
  SUBS R8,R6,R8 @DIFFERENCE IN Y-COORDINATE FROM CENTROID1
  SUBS R9,R5,R9 @DIFFERENCE IN X-COORDINATE FROM CENTROID2
  SUBS R10,R6,R10 @DIFFERENCE IN Y-COORDINATE FROM CENTROID2
  SUBS R11,R5,R11 @DIFFERENCE IN X-COORDINATE FROM CENTROID3
  SUBS R12,R6,R12 @DIFFERENCE IN Y-COORDINATE FROM CENTROID3
  MUL R7,R7
  MLA R7,R8,R8,R7
  MUL R9,R9
  MLA R9,R10,R10,R9
  MUL R11,R11
  MLA R11,R12,R12,R11
  MOV R5,R7
  LDR R10,[R1],#4 @LOAD THE X-COORDINATE OF CENTROID4
  LDR R12,[R1],#-28 @LOAD THE Y-COORDINATE OF CENTROID4
  MUL R10,R10
  MLA R10,R12,R12,R10
  CMP R5,R9
  IT GT
  MOVGT R5,R9
  CMP R5,R11
  IT GT
  MOVGT R5,R11
  CMP R5,R10
  IT GT
  MOVGT R5,R10
  CMP R5,R7
  IT EQ
  MOVEQ R8,#1
  CMP R5,R9
  IT EQ
  MOVEQ R8,#2
  CMP R5,R11
  IT EQ
  MOVEQ R8,#3
  CMP R5,R10
  IT EQ
  MOVEQ R8,#4
  STR R8,[R2],#4
  SUBS R4,#1
  CMP R4,#0
  BNE SUBROUTINE2
  BX LR

@credit Xinwen